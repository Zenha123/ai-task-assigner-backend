# backend/docker-compose.yml
services:
  web:
    build: .
    container_name: ai-task-assigner-web
    command: >
      sh -c "
      python manage.py migrate &&
      python manage.py collectstatic --noinput &&
      gunicorn backend.wsgi:application --bind 0.0.0.0:8009 --workers 2 --threads 4
      "
    env_file:
      - .env
    environment:
      DJANGO_SETTINGS_MODULE: backend.settings
    volumes:
      - .:/app
    working_dir: /app
    ports:
      - "8009:8009"